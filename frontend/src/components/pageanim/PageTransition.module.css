.transitionContainer {
  position: relative;
  width: 100%;
  min-height: 100vh;
  overflow: hidden;
}

.pageWrapper, .staticPageWrapper {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  will-change: filter, transform, opacity;
  transition:
    filter 300ms ease-out,
    transform 600ms ease-out,
    opacity 600ms ease-out;
}

.staticPageWrapper {
  position: relative;
}

/* --- OUTGOING PAGE ANIMATION PHASES --- */

/* Default state for the page that will animate out */
.pageWrapper {
  filter: grayscale(0) blur(0px);
  opacity: 1;
  transform: translateX(0);
}

/* Phase 1: Turn Black & White */
.phase1_bw {
  filter: grayscale(100%) blur(0px) !important;
}

/* Phase 2: Add Blur */
.phase2_blur {
  filter: grayscale(100%) blur(8px) !important;
}

/* Phase 3: Drift Away */
.phase3_driftLeft {
  filter: grayscale(100%) blur(12px) !important;
  opacity: 0 !important;
  transform: translateX(-50px) !important;
}

.phase3_driftRight {
  filter: grayscale(100%) blur(12px) !important;
  opacity: 0 !important;
  transform: translateX(50px) !important;
}

/* --- INCOMING PAGE ANIMATION --- */

.incomingPage {
  z-index: -1; /* Hide behind the old page initially */
  opacity: 0;
  filter: blur(10px);
  transform: scale(0.98);
  transition:
    opacity 500ms ease-out 300ms, /* Starts after a 300ms delay */
    filter 500ms ease-out 300ms,
    transform 500ms ease-out 300ms;
}

/* This class is added during Phase 3 to make the new page appear */
.incoming_visible {
  z-index: 1;
  opacity: 1 !important;
  filter: blur(0) !important;
  transform: scale(1) !important;
}

/* --- MOBILE OVERRIDE --- */
@media (max-width: 768px) {
  .pageWrapper, .staticPageWrapper {
    position: static;
    transition: none !important;
  }
}
